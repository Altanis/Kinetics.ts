(()=>{"use strict";var e={660:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.events={}}on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}emit(e,...t){if(this.events[e])for(const i of this.events[e])i(...t)}}},296:function(e,t,i){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Colors=t.EntityType=t.Environment=t.Movement=t.Vector=t.Renderer=t.Camera=t.Collision=t.Circle=t.Entity=t.System=void 0;const s=o(i(510));t.System=s.default;const n=o(i(845)),r=o(i(404)),a=o(i(694));t.Entity=a.default;const l=o(i(149));t.Circle=l.default;const c=o(i(940));t.Camera=c.default;const h=o(i(544));t.Renderer=h.default;const d=o(i(91));t.Vector=d.default;const u=i(184);Object.defineProperty(t,"Movement",{enumerable:!0,get:function(){return u.Movement}}),Object.defineProperty(t,"Environment",{enumerable:!0,get:function(){return u.Environment}}),Object.defineProperty(t,"EntityType",{enumerable:!0,get:function(){return u.EntityType}}),Object.defineProperty(t,"Colors",{enumerable:!0,get:function(){return u.Colors}}),t.Collision={CollisionResolver:n.default,SpatialHashGrid:r.default}},510:function(e,t,i){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(184),n=i(2),r=o(i(404)),a=o(i(845)),l=o(i(940)),c=o(i(544)),h=o(i(660));class d extends h.default{get momentum(){let e=0;for(const t of this.entities)t&&(e+=t.velocity.magnitude*t.mass+Math.abs(t.angularVelocity*t.inertia)*t.mass);return e}get kineticEnergy(){let e=0;for(const t of this.entities)t&&(e+=.5*t.mass*(t.velocity.magnitude*t.velocity.magnitude));return e}get nextId(){const e=this.entities.indexOf(void 0);return-1!==e?e:this.entities.length}constructor(e){var t,i;if(super(),this.width=null,this.height=null,this.friction=.1,this.gravity=0,this.CollisionResolver=new a.default,this.entities=[],this.verbose=!1,this.tick=0,this.tickRate=0,this.environment=s.Environment.Browser,this.performance={worldUpdateRate:0,memoryUsage:0},this.environment="undefined"==typeof window?s.Environment.Node:s.Environment.Browser,this.config=e,this.width=(null===(t=e.dimensions)||void 0===t?void 0:t.x)||null,this.height=(null===(i=e.dimensions)||void 0===i?void 0:i.y)||null,this.width&&!this.height||this.height&&!this.width)throw new n.ConfigurationError("Both dimensions must be specified for the system.");if(this.friction=void 0===e.friction?.1:e.friction,this.gravity=void 0===e.gravity?0:e.gravity,this.camera=new l.default(e.camera||{},this),this.renderer=new c.default(e.render,this),this.verbose=!!e.verbose,!e.collisionInfo)throw new n.ConfigurationError("Collision information must be specified for the system.");this.CollisionManager=new r.default(this,e.collisionInfo.cellSize||12),e.useRAF?requestAnimationFrame(this.update.bind(this)):(this.tickRate=e.tickRate||60,setInterval(this.update.bind(this),1e3/this.tickRate)),this.verbose&&console.log("[PHYSICS]: Engine started.")}setCollisionEngine(e){this.CollisionManager=e}update(){var e;const t=performance.now();this.CollisionManager.clear();for(const e of this.entities){if(!e)return;this.CollisionManager.insert(e.bounds.min.x,e.bounds.min.y,e.bounds.dimensions.x,e.bounds.dimensions.y,e.id),e.update()}this.CollisionManager.query(),this.tick++,this.performance.worldUpdateRate=performance.now()-t,this.performance.memoryUsage=this.environment===s.Environment.Browser?(null===(e=performance.memory)||void 0===e?void 0:e.usedJSHeapSize)/1024/1024:process.memoryUsage().heapUsed/1024/1024,this.config.useRAF&&requestAnimationFrame(this.update.bind(this))}addEntity(e){const t=this.nextId;return e.id=t,this.entities[t]=e,this.emit("entityCreate",e),e}removeEntity(e){return this.entities[e.id]=void 0,this.emit("entityDelete",e),e}}t.default=d},845:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=i(184);class s{detect(e,t){if(e.type===o.EntityType.Circle&&t.type===o.EntityType.Circle)return this.detectCircleCircle(e,t);if(e.type===o.EntityType.Circle||t.type===o.EntityType.Circle){const i=e.type===o.EntityType.Circle?e:t,s=e.type===o.EntityType.Circle?t:e;return this.detectCirclePolygon(i,s)}let i,n=1/0;const r=e.vertices,a=t.vertices,l=r.length+a.length;for(let e=0;e<l;e++){let t;if(t=e<r.length?r[e].clone.subtract(r[(e+1)%r.length]).orthogonal.normalize():a[e-r.length].clone.subtract(a[(e+1)%a.length]).orthogonal.normalize(),0===t.x&&0===t.y)continue;const[o,l]=s.project(t,r),[c,h]=s.project(t,a),d=Math.min(l,h)-Math.max(o,c);if(d<=0)return;d<n&&(i=t,n=d)}i&&this.resolve(e,t,Math.max(e.elasticity,t.elasticity),n,i)}detectCirclePolygon(e,t){const i=t.vertices;let o,n=1/0;for(let t=0;t<i.length;t++){const r=i[t],a=i[(t+1)%i.length].clone.subtract(r).orthogonal.normalize();if(0===a.x&&0===a.y)continue;const[l,c]=s.project(a,i),h=e.position.dot(a),d=Math.min(c,h+e.radius)-Math.max(l,h-e.radius);if(d<=0)return;d<n&&(n=d,o=a)}o&&this.resolve(e,t,Math.max(e.elasticity,t.elasticity),n,o)}detectCircleCircle(e,t){const i=e.position.distance(t.position),o=e.radius+t.radius-i,s=e.position.clone.subtract(t.position).normalize();o<=0||s&&this.resolve(e,t,Math.max(e.elasticity,t.elasticity),o,s)}static project(e,t){let i=1/0,o=-1/0;for(const s of t){const t=s.dot(e);i=Math.min(i,t),o=Math.max(o,t)}return[i,o]}resolve(e,t,i,o,s){var n,r,a,l,c,h,d,u;null===(r=(n=e.hooks).preResolve)||void 0===r||r.call(n,t),null===(l=(a=t.hooks).preResolve)||void 0===l||l.call(a,e),e.position.dot(s)<t.position.dot(s)&&s.scale(-1);const y=e.velocity,f=t.velocity,m=e.mass,g=t.mass,p=-(1+i)*y.clone.subtract(f).dot(s)/(1/m+1/g),v=s.clone.scale(p);e.static||e.velocity.add(v.clone.scale(1/m)),t.static||t.velocity.subtract(v.clone.scale(1/g)),e.static||t.static||(e.angularVelocity+=1/e.inertia*e.position.clone.subtract(t.position).cross(v),t.angularVelocity-=1/t.inertia*e.position.clone.subtract(t.position).cross(v));const w=s.clone.scale(o/(1/m+1/g));e.static||e.updatePosition(w.clone.scale(1/m)),t.static||t.updatePosition(w.clone.scale(-1/g)),null===(h=(c=e.hooks).postResolve)||void 0===h||h.call(c,t),null===(u=(d=t.hooks).postResolve)||void 0===u||u.call(d,e)}}t.default=s},404:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=i(2),s=(e,t)=>e+46340*t;t.default=class{constructor(e,t){if(this.cells=new Map,!Number.isInteger(t)||t>=32)throw new o.ConfigurationError("Could not initialize SpatialHashGrid: Cell size must be an integer value less than 32.");this.system=e,this.cellSize=t}insert(e,t,i,o,n){const r=e>>this.cellSize,a=t>>this.cellSize,l=e+i>>this.cellSize,c=t+o>>this.cellSize;for(let e=r;e<=l;e++)for(let t=a;t<=c;t++){const i=s(e,t);this.cells.get(i)||this.cells.set(i,[]),this.cells.get(i).push(n)}}query(){this.cells.forEach((e=>{const t=e.length;if(!(t<2))for(let i=0;i<t;i++)for(let o=i+1;o<t;o++){const t=this.system.entities[e[i]],s=this.system.entities[e[o]];this.system.CollisionResolver.detect(t,s)}}))}clear(){this.cells.clear()}}},694:function(e,t,i){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(184),n=i(2),r=o(i(91));t.default=class{get hitbox(){return this.bounds.dimensions}get inertia(){if(this.static)return 0;const e=this.vertices;let t=0;for(let i=0;i<e.length;i++){const o=e[i],s=e[(i+1)%e.length];t+=o.cross(o)+s.cross(s)+o.cross(s)}return Math.abs(t)/12}get angle(){return this._angle}set angle(e){if(e===this._angle||!1===this.info.rotate)return;const t=e-this._angle,i=Math.cos(t),o=Math.sin(t);this._angle=e;for(let e=0;e<this.vertices.length;e++){const t=this.vertices[e].x-this.position.x,s=this.vertices[e].y-this.position.y,n=t*i-s*o,r=t*o+s*i;this.vertices[e].x=n+this.position.x,this.vertices[e].y=r+this.position.y}}get bounds(){let e=1/0,t=1/0,i=-1/0,o=-1/0;if(void 0===this.position){for(const s of this.vertices)e=Math.min(e,s.x),i=Math.max(i,s.x),t=Math.min(t,s.y),o=Math.max(o,s.y);this.position=new r.default((e+i)/2,(t+o)/2)}else for(let s of this.vertices)e=Math.min(e,s.x),i=Math.max(i,s.x),t=Math.min(t,s.y),o=Math.max(o,s.y);const s=new r.default(i-e,o-t);return{min:new r.default(e,t),max:new r.default(i,o),dimensions:s}}get area(){let e=0;for(let t=0;t<this.vertices.length;t++)e+=this.vertices[t].cross(this.vertices[(t+1)%this.vertices.length]);return Math.abs(e/2)}constructor(e,t){this.type=s.EntityType.Polygon,this.velocity=new r.default(0,0),this.acceleration=new r.default(0,0),this.angularVelocity=0,this.angularSpeed=0,this.hooks={},this._angle=0,this.info=e,this.vertices=this.initializeVertices(e),this.bounds,this.mass=Math.max(1,e.mass),this.speed=e.speed,this.angularSpeed=e.angularSpeed||0,this.elasticity=Math.max(0,e.elasticity)||0,this.static=!!e.static,e.mass||console.warn("[SYSTEM]: Entity mass defaulted to 1 due to a zero quantity being provided."),this.configure(e.render||{}),this.hooks=e.hooks||{},this.system=t}initializeVertices(e){if(!e.form)throw new n.ConfigurationError("No form was provided for the entity.");if(!e.form.sides&&!e.form.vertices)throw new n.ConfigurationError("No sides nor vertices were provided for the entity.");let t=[];if(e.form.vertices)t=e.form.vertices;else if(e.form.sides){const i=[],o=e.form.radius;if(!o)throw new n.ConfigurationError("No radius was provided for the entity.");const s=2*Math.PI/e.form.sides;for(let t=0;t<e.form.sides;t++){const n=s*t+(e.form.rotation||0);i.push(r.default.toCartesian(o,n).add(e.form.offset||{x:0,y:0}))}t=i}return t}configure(e){this.rendering={strokeColor:e.strokeColor,fillColor:e.fillColor,strokeWidth:e.strokeWidth||1,glowIntensity:e.glowIntensity,glowColor:e.glowColor,hooks:e.hooks||{}}}rotate(...e){for(const t of e)switch(t){case s.Movement.Up:this.angularVelocity+=this.angularSpeed;break;case s.Movement.Down:case s.Movement.Left:this.angularVelocity-=this.angularSpeed;break;case s.Movement.Right:this.angularVelocity+=this.angularSpeed;break;default:console.error("[SYSTEM]: Invalid angular movement key.")}}move(...e){for(const t of e)switch(t){case s.Movement.Up:this.acceleration.y+=this.speed;break;case s.Movement.Down:this.acceleration.y-=this.speed;break;case s.Movement.Left:this.acceleration.x-=this.speed;break;case s.Movement.Right:this.acceleration.x+=this.speed;break;default:console.error("[SYSTEM]: Invalid movement key.")}this.acceleration.normalize().scale(this.speed),this.velocity.add(this.acceleration)}update(){this.static&&(this.velocity.x=this.velocity.y=this.angularVelocity=0),this.system.gravity&&!this.static&&(this.velocity.y-=this.system.gravity),this.velocity.scale(1-this.system.friction),this.angularVelocity*=1-this.system.friction,this.updatePosition(this.velocity),this.angle+=this.angularVelocity/100,this.acceleration.scale(0),this.system.emit("entityUpdate",this)}updatePosition(e){if(this.static)return;const t=this.system.width,i=this.system.height;if(t&&i){const o=t/2,s=i/2;this.position.x+e.x>o?e.x=o-this.position.x:this.position.x+e.x<-o&&(e.x=-o-this.position.x),this.position.y+e.y>s?e.y=s-this.position.y:this.position.y+e.y<-s&&(e.y=-s-this.position.y)}this.position.add(e);for(const t of this.vertices)t.add(e)}determineColors(){let e,t;return this.rendering.strokeColor&&(e=this.rendering.strokeColor),this.rendering.fillColor&&(t=this.rendering.fillColor),e||t||(e=s.Colors.Black),{stroke:e,fill:t}}render(e){const{stroke:t,fill:i}=this.determineColors();this.rendering.glowIntensity&&(e.shadowBlur=this.rendering.glowIntensity,e.shadowColor=this.rendering.glowColor||t||i),e.beginPath(),t&&(e.strokeStyle=t),i&&(e.fillStyle=i),e.lineWidth=this.rendering.strokeWidth||1;for(const t of this.vertices)e.lineTo(t.x,-t.y);e.closePath(),i&&e.fill(),t&&e.stroke()}}},149:function(e,t,i){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i(694)),n=i(184),r=i(2),a=o(i(91));class l extends s.default{get bounds(){const e=this.position||this.vertices[0];return void 0===this.position&&(this.position=e),{min:new a.default(e.x-this.radius,e.y-this.radius),max:e,dimensions:this.hitbox}}get radius(){return this._radius}set radius(e){if(e<=0)throw new r.ConfigurationError("The radius of a circle must be greater than 0.");this._radius=e}get hitbox(){return new a.default(2*this.radius,2*this.radius)}get inertia(){return this.static?0:this.mass*this.radius*this.radius/2}constructor(e,t){super(e,t),this.type=n.EntityType.Circle,this._radius=0,this.radius=e.radius}rotate(){}render(e){const{stroke:t,fill:i}=this.determineColors();this.rendering.glowIntensity&&(e.shadowBlur=this.rendering.glowIntensity,e.shadowColor=this.rendering.glowColor||t||i),e.beginPath(),i&&(e.fillStyle=i),t&&(e.strokeStyle=t),e.lineWidth=this.rendering.strokeWidth||1,e.arc(this.position.x,-this.position.y,this.radius,0,2*Math.PI),e.closePath(),e.stroke(),i&&e.fill(),t&&e.stroke()}}t.default=l},184:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Colors=t.EntityType=t.Environment=t.Movement=void 0,function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right"}(t.Movement||(t.Movement={})),function(e){e[e.Browser=0]="Browser",e[e.Node=1]="Node"}(t.Environment||(t.Environment={})),function(e){e[e.Polygon=0]="Polygon",e[e.Circle=1]="Circle"}(t.EntityType||(t.EntityType={})),function(e){e.Pink="#F177DD",e.LightRed="#FC7677",e.Red="#F14E54",e.Yellow="#FFE869",e.Peach="#FCC376",e.Orange="#FFA500",e.Green="#00E16E",e.BrightGreen="#43FF91",e.NeonGreen="#8AFF69",e.Blue="#00B2E1",e.DarkBlue="#768DFC",e.Purple="#BF7FF5",e.Gray="#C0C0C0",e.Black="#000000",e.White="#FFFFFF"}(t.Colors||(t.Colors={}))},2:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationError=t.InternalError=void 0;class i extends Error{constructor(e){super("[SYSTEM]: Whoops, something went wrong! Please report it at our GitHub page: "+e),this.name="InternalError"}}t.InternalError=i;class o extends Error{constructor(e){super("[SYSTEM]: An error occurred when configuring an Entity or the System: "+e),this.name="ConfigurationError"}}t.ConfigurationError=o},940:function(e,t,i){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(i(91));t.default=class{setCenter(e){this.position.x=e.x,this.position.y=e.y}constructor({position:e,zoom:t},i){this.position=new s.default(0,0),this.zoom=1,this.setCenter(e||{x:0,y:0}),this.zoom=t||1,this.system=i}}},544:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=i(184),s=i(2);t.default=class{constructor(e,t){if(this.framerate={fpsArr:[],fps:0,dt:0,lastUpdate:0},this.system=t,!e||!e.canvas)return;this.canvas=e.canvas;const i=this.canvas.getContext("2d");if(!i)throw new s.ConfigurationError("Could not configure Renderer: Your browser does not support CanvasRenderingContext2D.");this.context=i,window.addEventListener("resize",(()=>{this.canvas.width=window.innerWidth*window.devicePixelRatio,this.canvas.height=window.innerHeight*window.devicePixelRatio})),window.dispatchEvent(new Event("resize")),this.configure(e),requestAnimationFrame(this.render.bind(this))}configure(e){this.rendering={canvas:this.canvas,background:e.background||o.Colors.White,hooks:e.hooks||{},gridSize:e.gridSize||0,gridColor:e.gridColor||o.Colors.Black,gridWidth:e.gridWidth||1}}render(){var e,t,i,o,s,n,r,a;this.framerate.dt=performance.now()-this.framerate.lastUpdate,this.framerate.lastUpdate=performance.now(),this.framerate.fpsArr.length>30&&this.framerate.fpsArr.shift(),this.framerate.fpsArr.push(this.framerate.dt);let l=0;for(const e of this.framerate.fpsArr)l+=e;if(this.framerate.fps=Math.round(1e3/(l/this.framerate.fpsArr.length)),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.save(),this.context.fillStyle=this.rendering.background,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),0!==this.rendering.gridSize){this.context.strokeStyle=this.rendering.gridColor,this.context.lineWidth=this.rendering.gridWidth;for(let e=0;e<this.canvas.width;e+=this.rendering.gridSize)this.context.beginPath(),this.context.moveTo(e,0),this.context.lineTo(e,this.canvas.height),this.context.stroke();for(let e=0;e<this.canvas.height;e+=this.rendering.gridSize)this.context.beginPath(),this.context.moveTo(0,e),this.context.lineTo(this.canvas.width,e),this.context.stroke()}this.context.strokeStyle=this.rendering.gridColor,this.context.translate(this.canvas.width/2,this.canvas.height/2),this.context.scale(this.system.camera.zoom,this.system.camera.zoom),null===(t=(e=this.rendering.hooks).preRender)||void 0===t||t.call(e,this.context);for(const e of this.system.entities)e&&(this.context.save(),null===(o=(i=e.rendering.hooks).preRender)||void 0===o||o.call(i,e,this.context),e.render(this.context),null===(n=(s=e.rendering.hooks).postRender)||void 0===n||n.call(s,e,this.context),this.context.restore());this.context.restore(),null===(a=(r=this.rendering.hooks).postRender)||void 0===a||a.call(r,this.context),requestAnimationFrame(this.render.bind(this))}}},91:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t){this.x=0,this.y=0,this.x=e,this.y=t}static toCartesian(e,t){return new i(e*Math.cos(t),e*Math.sin(t))}add(e){return this.x+=e.x,this.y+=e.y,this}subtract(e){return this.x-=e.x,this.y-=e.y,this}scale(e){return this.x*=e,this.y*=e,this}normalize(){const e=this.magnitude;return 0===e?this.x=this.y=0:(this.x/=e,this.y/=e),this}distance(e){return this.clone.subtract(e).magnitude}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}project(e){return 0===e.x&&0===e.y?new i(0,0):e.clone.scale(this.dot(e)/e.magnitudeSq)}get orthogonal(){return new i(-this.y,this.x)}angle(e={x:0,y:0}){return Math.atan2(this.y-e.y,this.x-e.x)}set direction(e){const t=this.magnitude;this.x=t*Math.cos(e),this.y=t*Math.sin(e)}get magnitudeSq(){return this.x*this.x+this.y*this.y}get magnitude(){return Math.sqrt(this.magnitudeSq)}set magnitude(e){const t=this.angle();this.x=e*Math.cos(t),this.y=e*Math.sin(t)}get clone(){return new i(this.x,this.y)}}t.default=i}},t={};function i(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,i),n.exports}(()=>{const e=i(296),t=window.cellSize=Math.pow(2,6);const o=document.getElementById("canvas");o.width=window.innerWidth*window.devicePixelRatio,o.height=window.innerHeight*window.devicePixelRatio;const s=document.getElementById("fps"),n=document.getElementById("momentum"),r=document.getElementById("ke"),a=document.getElementById("tickRate"),l=document.getElementById("memoryUsage"),c=document.getElementById("showHitbox"),h=document.getElementById("showVectors");function d(e){if(0===e.indexOf("#")&&(e=e.slice(1)),3===e.length&&(e=`${e[0]}${e[0]}${e[1]}${e[1]}${e[2]}${e[2]}`),6!==e.length)return"#000000";var t=(255-parseInt(e.slice(0,2),16)).toString(16),i=(255-parseInt(e.slice(2,4),16)).toString(16),o=(255-parseInt(e.slice(4,6),16)).toString(16);return`#${t.padStart(2,"0")}${i.padStart(2,"0")}${o.padStart(2,"0")}`}const u=1920,y=1080,f=function(e,t,i,o){const s=e/2,n=t/2,r=Math.sqrt(Math.pow(s,2)+Math.pow(n,2));return Math.max(r,Math.abs(i),Math.abs(o))}(u,y,960,540);console.log(f);const m=window.system=new e.System({tickRate:60,friction:.1,gravity:0,collisionInfo:{cellSize:Math.log2(t)},camera:{zoom:1},dimensions:new e.Vector(u,y),render:{canvas:o,background:"rgb(5, 28, 31)",gridColor:"#FFFFFF",gridWidth:1,hooks:{preRender:function(t){const i=window.innerWidth,o=window.innerHeight,s=new e.Vector(-i,o);t.strokeStyle=e.Colors.Red,t.lineWidth=1,t.beginPath(),t.strokeRect(s.x,-s.y,2*i,2*o)},postRender:function(e){var t;s.innerText=m.renderer.framerate.fps.toFixed(2),n.innerText=m.momentum.toFixed(2),r.innerText=m.kineticEnergy.toFixed(2),a.innerText=`${(1e3/(m.performance.worldUpdateRate||1e-4)).toFixed(1)} hZ (${m.performance.worldUpdateRate.toFixed(2)} ms)`,l.innerText=`${m.performance.memoryUsage.toFixed(2)} MB`;const i=window.keys,o=m.entities[0];i.size&&(null===(t=null==o?void 0:o.move)||void 0===t||t.call(o,...i))}}}});new e.Entity({form:{vertices:[new e.Vector(-960,-540),new e.Vector(960,-540),new e.Vector(960,-440),new e.Vector(-960,-440)]},mass:10,speed:1,rotate:!1,elasticity:1.5,angularSpeed:1,render:{strokeColor:e.Colors.Red,strokeWidth:1,hooks:{postRender:function(t,i){const{bounds:{min:o},position:s,velocity:n,hitbox:r}=t;c.checked&&(i.strokeStyle=e.Colors.Blue,i.lineWidth=1,i.strokeRect(o.x,-o.y,r.x,-r.y)),h.checked&&(i.strokeStyle=d(t.rendering.fillColor||"#FF0000"),i.lineWidth=1,i.beginPath(),i.moveTo(s.x,-s.y),i.lineTo(s.x+10*n.x,-s.y-10*n.y),i.stroke()),i.beginPath(),i.arc(o.x,-o.y,5,0,2*Math.PI),i.fillStyle=e.Colors.Blue,i.fill(),i.beginPath(),i.arc(s.x,-s.y,5,0,2*Math.PI),i.fillStyle=e.Colors.Blue,i.fill()}}},static:!0},m),new e.Entity({form:{vertices:[new e.Vector(-960,540),new e.Vector(960,540),new e.Vector(960,440),new e.Vector(-960,440)]},mass:10,speed:1,rotate:!1,elasticity:1.5,angularSpeed:1,render:{strokeColor:e.Colors.Red,strokeWidth:1,hooks:{postRender:function(t,i){const{bounds:{min:o},position:s,velocity:n,hitbox:r}=t;c.checked&&(i.strokeStyle=e.Colors.Blue,i.lineWidth=1,i.strokeRect(o.x,-o.y,r.x,-r.y)),h.checked&&(i.strokeStyle=d(t.rendering.fillColor||"#FF0000"),i.lineWidth=1,i.beginPath(),i.moveTo(s.x,-s.y),i.lineTo(s.x+10*n.x,-s.y-10*n.y),i.stroke()),i.beginPath(),i.arc(o.x,-o.y,5,0,2*Math.PI),i.fillStyle=e.Colors.Blue,i.fill(),i.beginPath(),i.arc(s.x,-s.y,5,0,2*Math.PI),i.fillStyle=e.Colors.Blue,i.fill()}}},static:!0},m),new e.Entity({form:{vertices:[new e.Vector(-960,-540),new e.Vector(-860,-540),new e.Vector(-860,540),new e.Vector(-960,540)]},mass:10,speed:1,rotate:!1,elasticity:1.5,angularSpeed:1,render:{strokeColor:e.Colors.Red,strokeWidth:1,hooks:{postRender:function(t,i){const{bounds:{min:o},position:s,velocity:n,hitbox:r}=t;c.checked&&(i.strokeStyle=e.Colors.Blue,i.lineWidth=1,i.strokeRect(o.x,-o.y,r.x,-r.y)),h.checked&&(i.strokeStyle=d(t.rendering.fillColor||"#FF0000"),i.lineWidth=1,i.beginPath(),i.moveTo(s.x,-s.y),i.lineTo(s.x+10*n.x,-s.y-10*n.y),i.stroke()),i.beginPath(),i.arc(o.x,-o.y,5,0,2*Math.PI),i.fillStyle=e.Colors.Blue,i.fill(),i.beginPath(),i.arc(s.x,-s.y,5,0,2*Math.PI),i.fillStyle=e.Colors.Blue,i.fill()}},glowIntensity:1e4},static:!0},m),new e.Entity({form:{vertices:[new e.Vector(960,-540),new e.Vector(860,-540),new e.Vector(860,540),new e.Vector(960,540)]},mass:10,speed:1,rotate:!1,elasticity:1.5,angularSpeed:1,render:{strokeColor:e.Colors.Red,hooks:{postRender:function(t,i){const{bounds:{min:o},position:s,velocity:n,hitbox:r}=t;c.checked&&(i.strokeStyle=e.Colors.Blue,i.lineWidth=1,i.strokeRect(o.x,-o.y,r.x,-r.y)),h.checked&&(i.strokeStyle=d(t.rendering.fillColor||"#FF0000"),i.lineWidth=1,i.beginPath(),i.moveTo(s.x,-s.y),i.lineTo(s.x+10*n.x,-s.y-10*n.y),i.stroke()),i.beginPath(),i.arc(o.x,-o.y,5,0,2*Math.PI),i.fillStyle=e.Colors.Blue,i.fill(),i.beginPath(),i.arc(s.x,-s.y,5,0,2*Math.PI),i.fillStyle=e.Colors.Blue,i.fill()}},strokeWidth:1},static:!0},m);m.on("entityCreate",(e=>{console.log("A new entity has been created.",e.id)})),m.on("entityDelete",(e=>{console.log("An entity has been deleted.",e.id)}));"40 0 40 20 100 20 100 80 40 80 40 100 0 50".split(" ").map(((t,i,o)=>i%2?new e.Vector(+o[i-1],+t):null)).filter((e=>e)),"100 0 75 50 100 100 25 100 0 50 25 0".split(" ").map(((t,i,o)=>i%2?new e.Vector(+o[i-1],+t):null)).filter((e=>e));const g="50 0 63 38 100 38 69 59 82 100 50 75 18 100 31 59 0 38 37 38".split(" ").map(((t,i,o)=>i%2?new e.Vector(+o[i-1],+t):null)).filter((e=>e));console.log(g);"50 0 100 0 100 50 50 100 0 50 0 0".split(" ").map(((t,i,o)=>i%2?new e.Vector(+o[i-1],+t):null)).filter((e=>e));const p={mass:10,speed:1,elasticity:1,angularSpeed:1,render:{strokeColor:e.Colors.Red,strokeWidth:1,hooks:{postRender:function(t,i){const{bounds:{min:o},position:s,velocity:n,hitbox:r}=t;c.checked&&(i.strokeStyle=e.Colors.Red,i.lineWidth=1,i.strokeRect(o.x,-o.y,r.x,-r.y)),h.checked&&(i.strokeStyle=d(t.rendering.fillColor||"#FF0000"),i.lineWidth=1,i.beginPath(),i.moveTo(s.x,-s.y),i.lineTo(s.x+10*n.x,-s.y-10*n.y),i.stroke())}}}};[[0,40],[10,30],[20,30],[30,40],[20,50],[10,50]].map((([t,i])=>new e.Vector(t,i)));for(let t=0;t<0;t++){new e.Circle(Object.assign({form:{vertices:[new e.Vector(1e3*Math.random(),1e3*Math.random())]},radius:50},p),m)}for(let t=0;t<2;t++){const i=Math.random()<=1;let o=0===t?0:Math.random()*(2*(f-2e3))-(f-2e3);const s=0===t?0:Math.random()*(2*(f-2e3))-(f-2e3),n=3,r=50,a=["#F177DD","#FC7677","#F14E54","#FFE869","#FCC376","#FFA500","#00E16E","#43FF91","#8AFF69","#00B2E1","#768DFC","#C0C0C0"],l=a[Math.floor(Math.random()*a.length)]||e.Colors.Red;if(i){const t=new e.Circle({form:{vertices:[new e.Vector(o<0?o:-o,s)]},radius:r,mass:10,speed:1,elasticity:1,angularSpeed:.01,render:{strokeColor:l,strokeWidth:1,hooks:{postRender:function(t,i){const{bounds:{min:o},position:s,velocity:n,hitbox:r}=t;c.checked&&(i.strokeStyle=e.Colors.Red,i.lineWidth=1,i.strokeRect(o.x,-o.y,r.x,-r.y)),h.checked&&(i.strokeStyle=d(t.rendering.fillColor||"#FF0000"),i.lineWidth=1,i.beginPath(),i.moveTo(s.x,-s.y),i.lineTo(s.x+10*n.x,-s.y-10*n.y),i.stroke())}}}},m);m.addEntity(t)}else{const t=new e.Entity({form:{sides:n,radius:r,offset:{x:o,y:s}},mass:10,speed:10,elasticity:1,angularSpeed:1,rotate:!0,render:{strokeColor:l,strokeWidth:1,hooks:{postRender:function(t,i){const{bounds:{min:o},position:s,velocity:n,hitbox:r}=t;c.checked&&(i.strokeStyle=e.Colors.Red,i.lineWidth=1,i.strokeRect(o.x,-o.y,r.x,-r.y)),h.checked&&(i.strokeStyle=d(t.rendering.fillColor||"#FF0000"),i.lineWidth=1,i.beginPath(),i.moveTo(s.x,-s.y),i.lineTo(s.x+10*n.x,-s.y-10*n.y),i.stroke())}}}},m);m.addEntity(t)}}const v=window.keys=new Set;document.addEventListener("keydown",(function({key:t,code:i}){switch(t){case"ArrowUp":v.add(e.Movement.Up);break;case"ArrowDown":v.add(e.Movement.Down);break;case"ArrowLeft":v.add(e.Movement.Left);break;case"ArrowRight":v.add(e.Movement.Right)}switch(i){case"KeyW":v.add(e.Movement.Up);break;case"KeyS":v.add(e.Movement.Down);break;case"KeyA":v.add(e.Movement.Left);break;case"KeyD":v.add(e.Movement.Right)}})),document.addEventListener("keyup",(function({key:t,code:i}){switch(t){case"ArrowUp":v.delete(e.Movement.Up);break;case"ArrowDown":v.delete(e.Movement.Down);break;case"ArrowLeft":v.delete(e.Movement.Left);break;case"ArrowRight":v.delete(e.Movement.Right)}switch(i){case"KeyW":v.delete(e.Movement.Up);break;case"KeyS":v.delete(e.Movement.Down);break;case"KeyA":v.delete(e.Movement.Left);break;case"KeyD":v.delete(e.Movement.Right)}})),document.addEventListener("click",(function({clientX:e,clientY:t}){})),document.addEventListener("wheel",(function({deltaY:e}){m.camera.zoom+=e*(localStorage.sensitivity||.001)}))})()})();